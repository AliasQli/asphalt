## Example

### Code:

```
type Nat = μ a. 1 ⊕ a
type ! = λ (A : *). μ a. A ⊗ a
zero = fold Nat (inl Nat *)
succ = λ (x : Nat). fold Nat (inr 1 x)
dup! = λ (x : ! Nat). let a ⊗ x' = unfold x in let b ⊗ x'' = unfold x' in a ⊗ b
dup = fix (c : ! (Nat ⊸ Nat ⊗ Nat)). λ (x : Nat). case unfold x of inl s -> zero ⊗ zero; inr p -> let rec ⊗ d = unfold c in let x1 ⊗ x2 = rec p in succ x1 ⊗ succ x2
pred = λ (x : Nat). case unfold x of inl s -> zero; inr n -> n
zeros = fix (p : ! (! Nat)). let q ⊗ r = unfold p in fold (! Nat) (zero ⊗ q)
plus = fix (p : ! (Nat ⊸ Nat ⊸ Nat)). λ (x : Nat). λ (y : Nat). case unfold x of inl s -> y; inr n -> let rec ⊗ q = unfold p in succ (rec n y)
```

### Typechecking results:

```
type Nat --> μ a. 1 ⊕ a : *
type ! --> λ (A : *). μ a. A ⊗ a : * -> *
zero : Nat
succ : Nat ⊸ Nat
dup! : ! Nat ⊸ Nat ⊗ Nat
dup : Nat ⊸ Nat ⊗ Nat
pred : Nat ⊸ Nat
zeros : ! Nat
plus : Nat ⊸ Nat ⊸ Nat
```

### Latex (copy it to your renderer):

```latex
\text{type } Nat \hookrightarrow \mu a . \space \bold{1} \oplus a : * \newline
\text{type } ! \hookrightarrow \lambda (A:* . \space \mu a . \space A \otimes a : * \to * \newline
\text{zero} : \displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {\cdot \backslash \cdot \vdash * : \bold{1}} \bold{1} \text{I}} {\cdot \backslash \cdot \vdash \text{inl} ^{Nat} \space * : \bold{1} \oplus Nat} \otimes \text{I}} {\cdot \backslash \cdot \vdash \text{fold} ^{Nat} \space (\text{inl} ^{Nat} \space *) : Nat} \mu \text{I} \newline
\text{succ} : \displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {x : Nat \backslash \cdot \vdash x : Nat} } {x : Nat \backslash \cdot \vdash \text{inr} ^{1} \space x : \bold{1} \oplus Nat} \otimes \text{I}} {x : Nat \backslash \cdot \vdash \text{fold} ^{Nat} \space (\text{inr} ^{1} \space x) : Nat} \mu \text{I}} {\cdot \backslash \cdot \vdash \lambda (x : Nat). \space \text{fold} ^{Nat} \space (\text{inr} ^{1} \space x) : Nat \multimap Nat} \multimap \text{I} \newline
\text{dup!} : \displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {x : ! \space Nat \backslash \cdot \vdash x : ! \space Nat} } {x : ! \space Nat \backslash \cdot \vdash \text{unfold } x : Nat \otimes ! \space Nat} \mu \text{E}\qquad\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {a : Nat, x' : ! \space Nat \backslash a \vdash x' : ! \space Nat} } {a : Nat, x' : ! \space Nat \backslash a \vdash \text{unfold } x' : Nat \otimes ! \space Nat} \mu \text{E}\qquad\displaystyle \frac {\displaystyle \frac {} {a : Nat, b : Nat, x'' : ! \space Nat \backslash b, x'' \vdash a : Nat} \qquad\displaystyle \frac {} {b : Nat, x'' : ! \space Nat \backslash x'' \vdash b : Nat} } {a : Nat, b : Nat, x'' : ! \space Nat \backslash x'' \vdash a \otimes b : Nat \otimes Nat} \otimes \text{I}} {a : Nat, x' : ! \space Nat \backslash \cdot \vdash \text{let } b \otimes x'' = \text{unfold } x' \text{ in } a \otimes b : Nat \otimes Nat} \otimes \text{E}} {x : ! \space Nat \backslash \cdot \vdash \text{let } a \otimes x' = \text{unfold } x \text{ in } \text{let } b \otimes x'' = \text{unfold } x' \text{ in } a \otimes b : Nat \otimes Nat} \otimes \text{E}} {\cdot \backslash \cdot \vdash \lambda (x : ! \space Nat). \space \text{let } a \otimes x' = \text{unfold } x \text{ in } \text{let } b \otimes x'' = \text{unfold } x' \text{ in } a \otimes b : ! \space Nat \multimap Nat \otimes Nat} \multimap \text{I} \newline
\text{dup} : \displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {c : ! \space (Nat \multimap Nat \otimes Nat), x : Nat \backslash c \vdash x : Nat} } {c : ! \space (Nat \multimap Nat \otimes Nat), x : Nat \backslash c \vdash \text{unfold } x : \bold{1} \oplus Nat} \mu \text{E}\qquad\displaystyle \frac {\displaystyle \frac {zero : Nat} {c : ! \space (Nat \multimap Nat \otimes Nat), s : \bold{1} \backslash c, s \vdash zero : Nat} \text{intro}\qquad\displaystyle \frac {zero : Nat} {c : ! \space (Nat \multimap Nat \otimes Nat), s : \bold{1} \backslash c, s \vdash zero : Nat} \text{intro}} {c : ! \space (Nat \multimap Nat \otimes Nat), s : \bold{1} \backslash c, s \vdash zero \otimes zero : Nat \otimes Nat} \otimes \text{I}\qquad\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {c : ! \space (Nat \multimap Nat \otimes Nat), p : Nat \backslash p \vdash c : ! \space (Nat \multimap Nat \otimes Nat)} } {c : ! \space (Nat \multimap Nat \otimes Nat), p : Nat \backslash p \vdash \text{unfold } c : (Nat \multimap Nat \otimes Nat) \otimes ! \space (Nat \multimap Nat \otimes Nat)} \mu \text{E}\qquad\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {p : Nat, rec : Nat \multimap Nat \otimes Nat, d : ! \space (Nat \multimap Nat \otimes Nat) \backslash p, d \vdash rec : Nat \multimap Nat \otimes Nat} \qquad\displaystyle \frac {} {p : Nat, d : ! \space (Nat \multimap Nat \otimes Nat) \backslash d \vdash p : Nat} } {p : Nat, rec : Nat \multimap Nat \otimes Nat, d : ! \space (Nat \multimap Nat \otimes Nat) \backslash d \vdash rec \space p : Nat \otimes Nat} \multimap \text{E}\qquad\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {succ : Nat \multimap Nat} {d : ! \space (Nat \multimap Nat \otimes Nat), x1 : Nat, x2 : Nat \backslash d, x1, x2 \vdash succ : Nat \multimap Nat} \text{intro}\qquad\displaystyle \frac {} {d : ! \space (Nat \multimap Nat \otimes Nat), x1 : Nat, x2 : Nat \backslash d, x2 \vdash x1 : Nat} } {d : ! \space (Nat \multimap Nat \otimes Nat), x1 : Nat, x2 : Nat \backslash d, x2 \vdash succ \space x1 : Nat} \multimap \text{E}\qquad\displaystyle \frac {\displaystyle \frac {succ : Nat \multimap Nat} {d : ! \space (Nat \multimap Nat \otimes Nat), x2 : Nat \backslash d, x2 \vdash succ : Nat \multimap Nat} \text{intro}\qquad\displaystyle \frac {} {d : ! \space (Nat \multimap Nat \otimes Nat), x2 : Nat \backslash d \vdash x2 : Nat} } {d : ! \space (Nat \multimap Nat \otimes Nat), x2 : Nat \backslash d \vdash succ \space x2 : Nat} \multimap \text{E}} {d : ! \space (Nat \multimap Nat \otimes Nat), x1 : Nat, x2 : Nat \backslash d \vdash succ \space x1 \otimes succ \space x2 : Nat \otimes Nat} \otimes \text{I}} {p : Nat, rec : Nat \multimap Nat \otimes Nat, d : ! \space (Nat \multimap Nat \otimes Nat) \backslash d \vdash \text{let } x1 \otimes x2 = rec \space p \text{ in } succ \space x1 \otimes succ \space x2 : Nat \otimes Nat} \otimes \text{E}} {c : ! \space (Nat \multimap Nat \otimes Nat), p : Nat \backslash \cdot \vdash \text{let } rec \otimes d = \text{unfold } c \text{ in } \text{let } x1 \otimes x2 = rec \space p \text{ in } succ \space x1 \otimes succ \space x2 : Nat \otimes Nat} \otimes \text{E}} {c : ! \space (Nat \multimap Nat \otimes Nat), x : Nat \backslash \cdot \vdash \text{case } \text{unfold } x \text{ of inl } s \to zero \otimes zero\text{; inr } p \to \text{let } rec \otimes d = \text{unfold } c \text{ in } \text{let } x1 \otimes x2 = rec \space p \text{ in } succ \space x1 \otimes succ \space x2 : Nat \otimes Nat} \oplus \text{E}} {c : ! \space (Nat \multimap Nat \otimes Nat) \backslash \cdot \vdash \lambda (x : Nat). \space \text{case } \text{unfold } x \text{ of inl } s \to zero \otimes zero\text{; inr } p \to \text{let } rec \otimes d = \text{unfold } c \text{ in } \text{let } x1 \otimes x2 = rec \space p \text{ in } succ \space x1 \otimes succ \space x2 : Nat \multimap Nat \otimes Nat} \multimap \text{I}} {\cdot \backslash \cdot \vdash \text{fix } (c : ! \space (Nat \multimap Nat \otimes Nat)). \space  \lambda (x : Nat). \space \text{case } \text{unfold } x \text{ of inl } s \to zero \otimes zero\text{; inr } p \to \text{let } rec \otimes d = \text{unfold } c \text{ in } \text{let } x1 \otimes x2 = rec \space p \text{ in } succ \space x1 \otimes succ \space x2 : Nat \multimap Nat \otimes Nat} \text{fix} \newline
\text{pred} : \displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {x : Nat \backslash \cdot \vdash x : Nat} } {x : Nat \backslash \cdot \vdash \text{unfold } x : \bold{1} \oplus Nat} \mu \text{E}\qquad\displaystyle \frac {zero : Nat} {s : \bold{1} \backslash s \vdash zero : Nat} \text{intro}\qquad\displaystyle \frac {} {n : Nat \backslash \cdot \vdash n : Nat} } {x : Nat \backslash \cdot \vdash \text{case } \text{unfold } x \text{ of inl } s \to zero\text{; inr } n \to n : Nat} \oplus \text{E}} {\cdot \backslash \cdot \vdash \lambda (x : Nat). \space \text{case } \text{unfold } x \text{ of inl } s \to zero\text{; inr } n \to n : Nat \multimap Nat} \multimap \text{I} \newline
\text{zeros} : \displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {p : ! \space (! \space Nat) \backslash \cdot \vdash p : ! \space (! \space Nat)} } {p : ! \space (! \space Nat) \backslash \cdot \vdash \text{unfold } p : ! \space Nat \otimes ! \space (! \space Nat)} \mu \text{E}\qquad\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {zero : Nat} {q : ! \space Nat, r : ! \space (! \space Nat) \backslash q, r \vdash zero : Nat} \text{intro}\qquad\displaystyle \frac {} {q : ! \space Nat, r : ! \space (! \space Nat) \backslash r \vdash q : ! \space Nat} } {q : ! \space Nat, r : ! \space (! \space Nat) \backslash r \vdash zero \otimes q : Nat \otimes ! \space Nat} \otimes \text{I}} {q : ! \space Nat, r : ! \space (! \space Nat) \backslash r \vdash \text{fold} ^{(! Nat)} \space (zero \otimes q) : ! \space Nat} \mu \text{I}} {p : ! \space (! \space Nat) \backslash \cdot \vdash \text{let } q \otimes r = \text{unfold } p \text{ in } \text{fold} ^{(! Nat)} \space (zero \otimes q) : ! \space Nat} \otimes \text{E}} {\cdot \backslash \cdot \vdash \text{fix } (p : ! \space (! \space Nat)). \space  \text{let } q \otimes r = \text{unfold } p \text{ in } \text{fold} ^{(! Nat)} \space (zero \otimes q) : ! \space Nat} \text{fix} \newline
\text{plus} : \displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {p : ! \space (Nat \multimap Nat \multimap Nat), x : Nat, y : Nat \backslash p, y \vdash x : Nat} } {p : ! \space (Nat \multimap Nat \multimap Nat), x : Nat, y : Nat \backslash p, y \vdash \text{unfold } x : \bold{1} \oplus Nat} \mu \text{E}\qquad\displaystyle \frac {} {p : ! \space (Nat \multimap Nat \multimap Nat), y : Nat, s : \bold{1} \backslash p, s \vdash y : Nat} \qquad\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {p : ! \space (Nat \multimap Nat \multimap Nat), y : Nat, n : Nat \backslash y, n \vdash p : ! \space (Nat \multimap Nat \multimap Nat)} } {p : ! \space (Nat \multimap Nat \multimap Nat), y : Nat, n : Nat \backslash y, n \vdash \text{unfold } p : (Nat \multimap Nat \multimap Nat) \otimes ! \space (Nat \multimap Nat \multimap Nat)} \mu \text{E}\qquad\displaystyle \frac {\displaystyle \frac {succ : Nat \multimap Nat} {y : Nat, n : Nat, rec : Nat \multimap Nat \multimap Nat, q : ! \space (Nat \multimap Nat \multimap Nat) \backslash y, n, rec, q \vdash succ : Nat \multimap Nat} \text{intro}\qquad\displaystyle \frac {\displaystyle \frac {\displaystyle \frac {} {y : Nat, n : Nat, rec : Nat \multimap Nat \multimap Nat, q : ! \space (Nat \multimap Nat \multimap Nat) \backslash y, n, q \vdash rec : Nat \multimap Nat \multimap Nat} \qquad\displaystyle \frac {} {y : Nat, n : Nat, q : ! \space (Nat \multimap Nat \multimap Nat) \backslash y, q \vdash n : Nat} } {y : Nat, n : Nat, rec : Nat \multimap Nat \multimap Nat, q : ! \space (Nat \multimap Nat \multimap Nat) \backslash y, q \vdash rec \space n : Nat \multimap Nat} \multimap \text{E}\qquad\displaystyle \frac {} {y : Nat, q : ! \space (Nat \multimap Nat \multimap Nat) \backslash q \vdash y : Nat} } {y : Nat, n : Nat, rec : Nat \multimap Nat \multimap Nat, q : ! \space (Nat \multimap Nat \multimap Nat) \backslash q \vdash rec \space n \space y : Nat} \multimap \text{E}} {y : Nat, n : Nat, rec : Nat \multimap Nat \multimap Nat, q : ! \space (Nat \multimap Nat \multimap Nat) \backslash q \vdash succ \space (rec \space n \space y) : Nat} \multimap \text{E}} {p : ! \space (Nat \multimap Nat \multimap Nat), y : Nat, n : Nat \backslash \cdot \vdash \text{let } rec \otimes q = \text{unfold } p \text{ in } succ \space (rec \space n \space y) : Nat} \otimes \text{E}} {p : ! \space (Nat \multimap Nat \multimap Nat), x : Nat, y : Nat \backslash \cdot \vdash \text{case } \text{unfold } x \text{ of inl } s \to y\text{; inr } n \to \text{let } rec \otimes q = \text{unfold } p \text{ in } succ \space (rec \space n \space y) : Nat} \oplus \text{E}} {p : ! \space (Nat \multimap Nat \multimap Nat), x : Nat \backslash \cdot \vdash \lambda (y : Nat). \space \text{case } \text{unfold } x \text{ of inl } s \to y\text{; inr } n \to \text{let } rec \otimes q = \text{unfold } p \text{ in } succ \space (rec \space n \space y) : Nat \multimap Nat} \multimap \text{I}} {p : ! \space (Nat \multimap Nat \multimap Nat) \backslash \cdot \vdash \lambda (x : Nat). \space \lambda (y : Nat). \space \text{case } \text{unfold } x \text{ of inl } s \to y\text{; inr } n \to \text{let } rec \otimes q = \text{unfold } p \text{ in } succ \space (rec \space n \space y) : Nat \multimap Nat \multimap Nat} \multimap \text{I}} {\cdot \backslash \cdot \vdash \text{fix } (p : ! \space (Nat \multimap Nat \multimap Nat)). \space  \lambda (x : Nat). \space \lambda (y : Nat). \space \text{case } \text{unfold } x \text{ of inl } s \to y\text{; inr } n \to \text{let } rec \otimes q = \text{unfold } p \text{ in } succ \space (rec \space n \space y) : Nat \multimap Nat \multimap Nat} \text{fix} \newline
```
